<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø®Ø¯Ù…Ø§ØªÙŠ Ø§Ù„Ø¹Ø±Ø§Ù‚ - Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø©</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap');
        :root { 
            --primary: #002366; 
            --accent: #D4AF37; 
            --bg-dark: #020617;
            --glass: rgba(255, 255, 255, 0.08);
        }
        
        body { 
            font-family: 'Tajawal', sans-serif; margin: 0; padding: 0;
            background: radial-gradient(circle at top, var(--primary), var(--bg-dark));
            color: #fff; min-height: 100vh; overflow-x: hidden;
        }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ */
        #loginScreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--primary); z-index: 20000;
            display: flex; justify-content: center; align-items: center; padding: 20px;
            box-sizing: border-box;
        }
        .login-card {
            background: white; color: #333; padding: 35px 25px; border-radius: 30px;
            width: 100%; max-width: 400px; text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .login-card h2 { color: var(--primary); margin-bottom: 5px; font-weight: 900; }
        .login-card p { font-size: 0.9rem; color: #666; margin-bottom: 25px; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        #splash {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--primary); z-index: 10000;
            display: none; flex-direction: column; justify-content: center; align-items: center; transition: 0.8s;
        }
        .loader { width: 45px; height: 45px; border: 4px solid rgba(212, 175, 55, 0.2); border-top: 4px solid var(--accent); border-radius: 50%; animation: spin 1s linear infinite; margin-top: 20px; }
        @keyframes spin { to { transform: rotate(360deg); } }

        header { padding: 50px 20px 30px; text-align: center; }
        header h1 { font-size: 2.5rem; font-weight: 900; color: var(--accent); margin: 0; }
        header p { opacity: 0.8; margin-top: 10px; }

        .container { width: 92%; max-width: 1200px; margin: 0 auto; padding-bottom: 120px; }
        
        .services-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        @media (min-width: 768px) { .services-grid { grid-template-columns: repeat(4, 1fr); } }

        .service-card { 
            background: var(--glass); backdrop-filter: blur(12px); border-radius: 24px; padding: 25px 10px; 
            text-align: center; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); transition: 0.3s;
        }
        .service-card:active { transform: scale(0.95); }

        .icon-box { width: 65px; height: 65px; border-radius: 20px; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; position: relative; }
        .service-card h3 { font-size: 0.95rem; font-weight: 700; color: #fff; margin: 0; }

        /* Ù†ÙˆØ§ÙØ° */
        .modal-overlay { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); z-index: 9999; justify-content: center; align-items: center; padding: 15px;
        }
        .modal-body { background: white; color: #333; border-radius: 25px; padding: 25px; width: 100%; max-width: 400px; }

        input, select, textarea { 
            width: 100%; padding: 15px; margin: 8px 0; border-radius: 12px; 
            border: 2px solid #f0f0f0; font-family: 'Tajawal'; box-sizing: border-box; font-size: 1rem;
        }
        .btn-main { background: var(--primary); color: white; border: none; padding: 16px; border-radius: 12px; width: 100%; font-size: 1.1rem; font-weight: 900; cursor: pointer; }

        .whatsapp-btn { position: fixed; bottom: 25px; left: 25px; background: #25d366; color: white !important; border-radius: 50px; padding: 12px 25px; display: flex; align-items: center; gap: 10px; text-decoration: none; font-weight: bold; z-index: 9000; }
    </style>
</head>
<body>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
    <div id="loginScreen">
        <div class="login-card">
            <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø®Ø¯Ù…Ø§ØªÙŠ</h2>
            <p>ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ù†ØµØ©</p>
            <form id="loginForm">
                <input type="text" id="reg-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ" required>
                <input type="tel" id="reg-phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required pattern="[0-9]{10,11}">
                <select id="reg-city" required>
                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©...</option>
                    <option>Ø§Ù„Ø¨ØµØ±Ø©</option><option>Ø¨ØºØ¯Ø§Ø¯</option><option>Ø£Ø±Ø¨ÙŠÙ„</option><option>Ø§Ù„Ù…ÙˆØµÙ„</option><option>Ø§Ù„Ù†Ø¬Ù</option><option>ÙƒØ±Ø¨Ù„Ø§Ø¡</option><option>Ø°ÙŠ Ù‚Ø§Ø±</option><option>Ù…ÙŠØ³Ø§Ù†</option>
                </select>
                <button type="submit" class="btn-main" style="margin-top:15px">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ©</button>
            </form>
        </div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
    <div id="splash">
        <div style="font-size: 3rem; font-weight: 900; color: var(--accent);">Ø®ÙØ¯Ù’Ù…Ø§ØªÙŠ</div>
        <div class="loader"></div>
    </div>

    <header>
        <h1>Ø®ÙØ¯Ù’Ù…Ø§ØªÙŠ <span>Ø§Ù„Ø¹Ø±Ø§Ù‚</span></h1>
        <p>Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù„Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ©</p>
    </header>

    <div class="container">
        <div class="services-grid" id="mainGrid"></div>
    </div>

    <a href="https://wa.me/9647716741488" class="whatsapp-btn">
        <i class="fab fa-whatsapp" style="font-size: 1.5rem;"></i> Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø¯Ø¹Ù…
    </a>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨ -->
    <div id="orderModal" class="modal-overlay">
        <div class="modal-body">
            <h2 id="mTitle" style="text-align:center; color: var(--primary);">Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©</h2>
            <form id="masterForm">
                <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø®ÙÙŠØ© Ù…Ù† Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù„ØªØ±Ø³Ù„ ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø·ÙˆÙŠÙ„Ø© -->
                <input type="hidden" name="User_Full_Name" id="hidden-name">
                <input type="hidden" name="User_Phone" id="hidden-phone">
                <input type="hidden" name="User_City" id="hidden-city">
                <input type="hidden" name="Service_Type" id="hidden-service">

                <label style="font-weight: bold; font-size: 0.9rem;">Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„ÙØ±Ø¹ÙŠØ©:</label>
                <select name="Detailed_Service" id="sub-list"></select>

                <label style="font-weight: bold; font-size: 0.9rem;">ÙˆØµÙ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:</label>
                <textarea name="Customer_Notes" rows="3" placeholder="Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© Ù‡Ù†Ø§..."></textarea>
                
                <button type="submit" class="btn-main" id="submitBtn">ØªØ£ÙƒÙŠØ¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ğŸš€</button>
                <div id="loadStatus" style="display:none; text-align:center; padding:10px; color:var(--primary); font-weight:bold">Ø¬Ø§Ø±Ù Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨Ùƒ...</div>
                
                <button type="button" onclick="closeModal()" style="background:none; border:none; color:#999; width:100%; margin-top:10px; cursor:pointer">Ø±Ø¬ÙˆØ¹</button>
            </form>
        </div>
    </div>

    <script>
        const FORMSPREE_ID = "mreqjepe";
        const ACTION_URL = `https://formspree.io/f/${FORMSPREE_ID}`;

        const services = [
            { name: 'Ø³Ø¨Ø§ÙƒØ©', icon: 'fa-faucet', bg: '#2563eb', subs: ['ØªØµÙ„ÙŠØ­ Ø£Ù†Ø§Ø¨ÙŠØ¨', 'Ù…Ø¶Ø®Ø§Øª', 'Ù…Ø¬Ø§Ø±ÙŠ'] },
            { name: 'ÙƒÙ‡Ø±Ø¨Ø§Ø¡', icon: 'fa-bolt-lightning', bg: '#dc2626', subs: ['ØªØ£Ø³ÙŠØ³ ÙƒØ§Ù…Ù„', 'ØµÙŠØ§Ù†Ø© Ø£Ø¹Ø·Ø§Ù„', 'Ø¥Ù†Ø§Ø±Ø©'] },
            { name: 'ØªÙƒÙŠÙŠÙ', icon: 'fa-snowflake', bg: '#0891b2', subs: ['ØºØ³Ù„ Ø³Ø¨Ù„Øª', 'Ø´Ø­Ù† ØºØ§Ø²'] },
            { name: 'Ù†Ø¬Ø§Ø±Ø©', icon: '', bg: '#d97706', subs: ['ØªØµÙ„ÙŠØ­ Ø£Ø«Ø§Ø«', 'ØºØ±Ù Ù†ÙˆÙ…'] },
            { name: 'Ø­Ø¯Ø§Ø¯Ø©', icon: 'fa-hammer', bg: '#475569', subs: ['Ù„Ø­Ø§Ù… Ø¹Ø§Ù…', 'Ù…Ø¸Ù„Ø§Øª'] },
            { name: 'Ø£Ø¬Ù‡Ø²Ø© Ù…Ù†Ø²Ù„ÙŠØ©', icon: 'fa-blender', bg: '#7c3aed', subs: ['ØºØ³Ø§Ù„Ø§Øª', 'Ø«Ù„Ø§Ø¬Ø§Øª'] },
            { name: 'ÙƒØ§Ù…ÙŠØ±Ø§Øª', icon: 'fa-video', bg: '#e11d48', subs: ['Ù†ØµØ¨ Ù…Ù†Ø¸ÙˆÙ…Ø©', 'ØµÙŠØ§Ù†Ø©'] },
            { name: 'Ø¨Ù†Ø§Ø¡ ÙˆØªØ±Ù…ÙŠÙ…', icon: 'fa-trowel-bricks', bg: '#92400e', subs: ['Ø¨Ù†Ø§Ø¡ Ù‡ÙŠÙƒÙ„', 'ØªØ±Ù…ÙŠÙ…'] },
            { name: 'ØµÙŠØ§Ù†Ø© Ø³ÙŠØ§Ø±Ø§Øª', icon: 'fa-car-wrench', bg: '#0284c7', subs: ['Ù…ÙŠÙƒØ§Ù†ÙŠÙƒ', 'ÙƒÙ‡Ø±Ø¨Ø§Ø¡'] },
            { name: 'Ø£ØµØ¨Ø§Øº', icon: 'fa-paint-roller', bg: '#db2777', subs: ['ØµØ¨Øº Ø¬Ø¯Ø±Ø§Ù†', 'Ø¯ÙŠÙƒÙˆØ±'] },
            { name: 'Ù†Ù‚Ù„ Ø£Ø«Ø§Ø«', icon: 'fa-truck-ramp-box', bg: '#ea580c', subs: ['Ù†Ù‚Ù„ Ø¯Ø§Ø®Ù„ÙŠ', 'ØªÙÙƒÙŠÙƒ'] },
            { name: 'ØªÙ†Ø¸ÙŠÙ', icon: 'fa-broom', bg: '#059669', subs: ['Ù…Ù†Ø§Ø²Ù„', 'Ø³Ø¬Ø§Ø¯'] },
            { name: 'Ø­Ù„Ø§Ù‚Ø©', icon: 'fa-scissors', bg: '#c026d3', subs: ['Ø±Ø¬Ø§Ù„', 'Ø£Ø·ÙØ§Ù„'] },
            { name: 'Ù…ÙˆÙ„Ø¯Ø§Øª', icon: 'fa-gears', bg: '#ca8a04', subs: ['ØµÙŠØ§Ù†Ø© Ù…Ù†Ø²Ù„ÙŠØ©', 'ØªØ¨Ø¯ÙŠÙ„ Ø¯Ù‡Ù†'] },
            { name: 'ØªÙˆØµÙŠÙ„', icon: 'fa-cart-shopping', bg: '#16a34a', subs: ['ØªÙˆØµÙŠÙ„ Ø·Ù„Ø¨Ø§Øª', 'Ù…Ø³ÙˆØ§Ù‚'] },
            { name: 'Ø­Ø¯Ø§Ø¦Ù‚', icon: 'fa-seedling', bg: '#15803d', subs: ['ØªÙ†Ø³ÙŠÙ‚ Ø­Ø¯Ø§Ø¦Ù‚', 'Ø«ÙŠÙ„'] }
        ];

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„
        document.getElementById('loginForm').onsubmit = (e) => {
            e.preventDefault();
            const userData = {
                name: document.getElementById('reg-name').value,
                phone: document.getElementById('reg-phone').value,
                city: document.getElementById('reg-city').value
            };
            localStorage.setItem('user_khidmati', JSON.stringify(userData));
            
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('splash').style.display = 'flex';
            setTimeout(() => { document.getElementById('splash').style.display = 'none'; }, 1500);
        };

        // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ©
        const grid = document.getElementById('mainGrid');
        services.forEach(s => {
            let iconMarkup = `<i class="fa-solid ${s.icon}" style="color:white; font-size:1.6rem"></i>`;
            if(s.name === 'Ù†Ø¬Ø§Ø±Ø©') iconMarkup = '<div style="color:white"><i class="fa-solid fa-hammer"></i> <i class="fa-solid fa-screwdriver"></i></div>';
            
            grid.innerHTML += `
                <div class="service-card" onclick="openModal('${s.name}')">
                    <div class="icon-box" style="background:${s.bg}; box-shadow: 0 10px 20px ${s.bg}55">${iconMarkup}</div>
                    <h3>${s.name}</h3>
                </div>`;
        });

        function openModal(name) {
            const s = services.find(x => x.name === name);
            const user = JSON.parse(localStorage.getItem('user_khidmati'));
            
            document.getElementById('mTitle').innerText = "Ø·Ù„Ø¨ " + name;
            document.getElementById('hidden-service').value = name;
            document.getElementById('sub-list').innerHTML = s.subs.map(v => `<option>${v}</option>`).join('');
            
            // Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®ÙÙŠØ© Ù…Ù† Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù„ØªØµÙ„Ùƒ ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            document.getElementById('hidden-name').value = user.name;
            document.getElementById('hidden-phone').value = user.phone;
            document.getElementById('hidden-city').value = user.city;
            
            document.getElementById('orderModal').style.display = 'flex';
        }

        function closeModal() { document.getElementById('orderModal').style.display = 'none'; }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ù…Ù†Ø¸Ù…Ø©
        document.getElementById('masterForm').onsubmit = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            const load = document.getElementById('loadStatus');
            
            btn.style.display = 'none';
            load.style.display = 'block';

            try {
                const res = await fetch(ACTION_URL, {
                    method: 'POST',
                    body: new FormData(e.target),
                    headers: { 'Accept': 'application/json' }
                });

                if (res.ok) {
                    alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³ØªØµÙ„Ùƒ Ù…ÙƒØ§Ù„Ù…Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…ÙˆØ¹Ø¯.");
                    closeModal();
                } else {
                    alert("âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.");
                }
            } catch {
                alert("âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.");
            } finally {
                btn.style.display = 'block';
                load.style.display = 'none';
            }
        };

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³Ø¨Ù‚
        window.onload = () => {
            if(localStorage.getItem('user_khidmati')) {
                document.getElementById('loginScreen').style.display = 'none';
            }
        };
    </script>
</body>
</html>
