<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>خدماتي - البصرة الشامل</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap');
        :root { 
            --royal-blue: #002366; 
            --gold: #D4AF37; 
            --white: #ffffff; 
            --glass-bg: rgba(255, 255, 255, 0.08);
            --gold-glow: rgba(212, 175, 55, 0.4);
        }
        
        body { 
            font-family: 'Tajawal', sans-serif; margin: 0; padding: 0;
            background: radial-gradient(circle at center, #003399 0%, #001133 100%);
            color: var(--white); min-height: 100vh; overflow-x: hidden;
            display: flex; flex-direction: column;
        }

        #splash {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--royal-blue); z-index: 10000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: 0.8s;
        }
        .splash-logo { font-size: 3.5rem; font-weight: 900; color: var(--gold); animation: pulse 2s infinite; }
        .loader { width: 40px; height: 40px; border: 4px solid rgba(212, 175, 55, 0.2); border-top: 4px solid var(--gold); border-radius: 50%; animation: spin 1s linear infinite; margin-top: 20px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        .header { text-align: center; padding: 40px 20px; background: var(--glass-bg); backdrop-filter: blur(10px); border-bottom: 1px solid var(--gold); margin-bottom: 30px; }
        .header h1 { margin: 0; font-size: 2.5rem; font-weight: 900; color: var(--gold); text-shadow: 0 0 15px var(--gold-glow); }

        .container { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; padding: 20px; max-width: 1200px; margin: 0 auto 100px; }
        .card { background: var(--glass-bg); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1); border-radius: 20px; padding: 20px; text-align: center; cursor: pointer; transition: 0.4s; }
        .card:active { transform: scale(0.95); border-color: var(--gold); }
        .card i { font-size: 2.8rem; margin-bottom: 15px; color: var(--gold); }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); backdrop-filter: blur(12px); align-items: center; justify-content: center; }
        .modal-content { background: #fff; color: #333; padding: 30px; border-radius: 30px; width: 90%; max-width: 450px; }
        input, select, textarea { width: 100%; padding: 12px; margin: 10px 0; border-radius: 12px; border: 1px solid #ddd; font-family: 'Tajawal'; box-sizing: border-box; }
        .btn-submit { background: #22c55e; color: white; border: none; padding: 15px; border-radius: 12px; width: 100%; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <div id="splash">
        <div class="splash-logo">خِدْماتي</div>
        <div class="loader"></div>
    </div>

    <div class="header">
        <h1>خِدْماتي - البصرة الشامل</h1>
        <p>جودة، أمان، وسرعة في التنفيذ</p>
    </div>

    <div class="container" id="grid">
        </div>

    <div id="masterModal" class="modal">
        <div class="modal-content">
            <h2 id="modal-title" style="color:var(--royal-blue); text-align:center;">طلب خدمة</h2>
            <form id="orderForm">
                <input type="hidden" name="Service_Name" id="h-service">
                
                <label>النوع:</label>
                <select name="Sub_Type" id="sub-service" required></select>
                
                <label>المنطقة:</label>
                <select name="Location" id="u-loc" required>
                    <option value="">اختر المنطقة</option>
                    <option>مركز البصرة</option><option>الزبير</option><option>شط العرب</option>
                    <option>أبي الخصيب</option><option>القرنة</option><option>الفاو</option>
                    <option>الهارثة</option><option>سفوان</option><option>المدينة</option>
                </select>
                
                <label>الهاتف:</label>
                <input type="tel" name="Phone" id="u-phone" placeholder="07XXXXXXXXX" required>
                
                <label>ملاحظات:</label>
                <textarea name="Notes" id="u-desc" rows="2"></textarea>
                
                <button type="submit" id="submitBtn" class="btn-submit">إرسال الطلب</button>
            </form>
            <p id="status" style="text-align:center; font-weight:bold; margin-top:10px;"></p>
        </div>
    </div>
	<script>
        const services = [
            { name: 'سباكة', icon: 'fa-faucet', subs: ['تأسيس مياه', 'مضخات', 'مجاري'] },
            { name: 'كهرباء', icon: 'fa-bolt', subs: ['تأسيس', 'تصليح شورت', 'إنارة'] },
            { name: 'تكييف', icon: 'fa-snowflake', subs: ['غسل سبلت', 'شحن غاز', 'نصب سبلت'] },
            { name: 'نجارة', icon: 'fa-hammer', subs: ['تصليح أثاث', 'أبواب', 'تركيب'] }
        ];

        const grid = document.getElementById('grid');
        services.forEach(s => {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `<i class="fas ${s.icon}"></i><h3>${s.name}</h3>`;
            card.onclick = () => openM(s);
            grid.appendChild(card);
        });

        window.onload = () => { setTimeout(() => document.getElementById('splash').style.display = 'none', 1000); };

        function openM(s) {
            document.getElementById('modal-title').innerText = "طلب " + s.name;
            document.getElementById('h-service').value = s.name;
            document.getElementById('sub-service').innerHTML = s.subs.map(opt => `<option>${opt}</option>`).join('');
            document.getElementById('masterModal').style.display = 'flex';
        }

        function closeM() { document.getElementById('masterModal').style.display = 'none'; }

        document.getElementById('orderForm').onsubmit = async function(e) {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            status.innerText = "جاري الإرسال...";

            // إرسال البيانات لـ Formspree
            const formData = new FormData(this);
            
            try {
                const response = await fetch("https://formspree.io/f/mreqjepe", {
                    method: "POST",
                    body: formData,
                    headers: { 'Accept': 'application/json' }
                });

                if (response.ok) {
                    status.style.color = "green";
                    status.innerText = "تم استلام طلبك في الموقع!";
                    
                    // فتح الواتساب (اختياري كدعم إضافي)
                    const msg = `طلب جديد: ${document.getElementById('h-service').value}`;
                    window.open(`https://wa.me/9647716741488?text=${encodeURIComponent(msg)}`, '_blank');
                    
                    setTimeout(closeM, 2000);
                    this.reset();
                } else {
                    status.innerText = "خطأ في الموقع، حاول ثانية.";
                }
            } catch (err) {
                status.innerText = "تأكد من اتصالك بالإنترنت.";
            } finally {
                btn.disabled = false;
            }
        };
    </script>
</body>
</html>
